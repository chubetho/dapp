import{d as p,o as _,a as b,w as n,r as g,u as s,T as I,b as L,e as Z,f as a,Z as q,g as w,m as $,O as S,X as G,h as K,E as u,j as z,n as T,L as X,M as Q,k as W,t as Y,p as ee,z as V,q as O,y as J,s as A,B as m,G as R,H as j,_ as E,v as te,x as se,a3 as ae,F as oe}from"./index-tRq5Nopp.js";import{_ as H}from"./Input.vue_vue_type_script_setup_true_lang-bS0nwmj7.js";import{g as ne,_ as le,h as re}from"./Label.vue_vue_type_script_setup_true_lang-hRg0TWQT.js";import"./Badge.vue_vue_type_script_setup_true_lang-huy-mP_W.js";const ce=p({__name:"Dialog",setup(l){return(e,o)=>(_(),b(s(I),null,{default:n(()=>[g(e.$slots,"default")]),_:3}))}}),ue=u("span",{class:"sr-only"},"Close",-1),de=p({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss","openAutoFocus","closeAutoFocus"],setup(l,{emit:e}){const o=l,t=L(e);return(d,C)=>(_(),b(s(K),null,{default:n(()=>[a(s(Z),{class:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),a(s(q),$({class:s(w)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",o.class)},{...o,...s(t)}),{default:n(()=>[g(d.$slots,"default"),a(s(S),{class:"absolute top-3 right-3 p-0.5 transition-colors rounded-md hover:bg-secondary"},{default:n(()=>[a(s(G),{class:"w-4 h-4"}),ue]),_:1})]),_:3},16,["class"])]),_:3}))}}),ie=p({__name:"DialogFooter",props:{class:{}},setup(l){const e=l;return(o,r)=>(_(),z("div",{class:T(s(w)("flex flex-col space-y-2 sm:space-y-0 mt-1.5 sm:flex-row sm:justify-end sm:space-x-2",e.class))},[g(o.$slots,"default")],2))}}),pe=p({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(l){const e=l;return(o,r)=>(_(),b(s(S),X(Q(e)),{default:n(()=>[g(o.$slots,"default")]),_:3},16))}}),_e=p({__name:"DialogHeader",props:{class:{}},setup(l){const e=l;return(o,r)=>(_(),z("div",{class:T(s(w)("flex flex-col space-y-2 text-center sm:text-left",e.class))},[g(o.$slots,"default")],2))}}),me=p({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const e=l;return(o,r)=>(_(),b(s(W),$(e,{class:s(w)("text-muted-foreground text-sm",e.class)}),{default:n(()=>[g(o.$slots,"default")]),_:3},16,["class"]))}}),fe=p({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const e=l;return(o,r)=>(_(),b(s(Y),$(e,{class:s(w)("text-lg text-foreground font-semibold leading-none tracking-tight",e.class)}),{default:n(()=>[g(o.$slots,"default")]),_:3},16,["class"]))}}),ge=p({__name:"DialogCreateUsername",props:{modelValue:{default:!1}},emits:["update:modelValue"],async setup(l){let e,o;const r=ee(l,"modelValue"),t=V(""),d=O(),C=J(),U=([e,o]=A(()=>d.getUserFactory()),e=await e,o(),e);async function B(){try{await U.registerUser(t.value),r.value=!1}catch{C.push("/error")}}return(v,f)=>{const D=fe,F=me,P=_e,c=H,y=E,h=pe,k=ie,M=de,N=ce;return _(),b(N,{open:r.value,"onUpdate:open":f[1]||(f[1]=x=>r.value=x)},{default:n(()=>[a(M,null,{default:n(()=>[a(P,null,{default:n(()=>[a(D,null,{default:n(()=>[m("no username")]),_:1}),a(F,null,{default:n(()=>[m(" you first need to create a username ")]),_:1})]),_:1}),u("form",{id:"create_username",onSubmit:R(B,["prevent"])},[a(c,{modelValue:s(t),"onUpdate:modelValue":f[0]||(f[0]=x=>j(t)?t.value=x:null),placeholder:"username"},null,8,["modelValue"])],32),a(k,null,{default:n(()=>[a(h,null,{default:n(()=>[a(y,{form:"create_username"},{default:n(()=>[m(" create ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}});function ye(){const l=te(),e=O(),o=J();return e.getUserFactory().then(r=>{r.getUser(e.address).then(t=>{l.value={owner:t[0],userName:t[1],isJudge:t[2],jobIds:Number(t[3]),reviewsBuyerCount:Number(t[4]),reviewSellerCount:Number(t[5])}}).catch(()=>{o.push("/error")})}),{user:l}}const be={class:"space-y-3"},ve={class:"space-y-2"},he={class:"space-y-2"},xe={class:"flex gap-3"},we={class:"w-[120px]"},Ce={class:"space-y-2"},De={class:"grow space-y-2"},Ve={class:"flex items-center justify-center"},$e={class:"w-[80%]"},Me=p({__name:"create_job",async setup(l){let e,o;const r=()=>({title:"",description:"",tags:[],price:0,id:0,inProcess:!1,owner:"0x0000000000000000000000000000000000000000"}),t=V(r()),d=V("");se(d,()=>{t.value.tags=d.value.trim().split(" ")});const C=J(),U=O(),B=([e,o]=A(()=>U.getJobFactory()),e=await e,o(),e),v=V(!1),{user:f}=ye();ae(async()=>{D()});function D(){return f.value&&f.value.userName?!0:(v.value=!0,!1)}async function F(){try{if(!D())return;await B.addJob(t.value.title,t.value.description,t.value.price,t.value.tags),t.value=r(),d.value=""}catch{C.push("/error")}}return(P,c)=>{const y=ne,h=H,k=le,M=E,N=re,x=ge;return _(),z(oe,null,[u("form",{class:"grid grid-cols-2 gap-10 py-10 items-center",onSubmit:R(F,["prevent"])},[u("div",be,[u("div",ve,[a(y,{for:"title"},{default:n(()=>[m("title")]),_:1}),a(h,{id:"title",modelValue:s(t).title,"onUpdate:modelValue":c[0]||(c[0]=i=>s(t).title=i),type:"text"},null,8,["modelValue"])]),u("div",he,[a(y,{for:"description"},{default:n(()=>[m("description")]),_:1}),a(k,{id:"description",modelValue:s(t).description,"onUpdate:modelValue":c[1]||(c[1]=i=>s(t).description=i)},null,8,["modelValue"])]),u("div",xe,[u("div",we,[u("div",Ce,[a(y,{for:"budget"},{default:n(()=>[m("budget")]),_:1}),a(h,{id:"budget",modelValue:s(t).price,"onUpdate:modelValue":c[2]||(c[2]=i=>s(t).price=i),modelModifiers:{number:!0},min:"0",step:"1",type:"number"},null,8,["modelValue"])])]),u("div",De,[a(y,{for:"badges"},{default:n(()=>[m("badges")]),_:1}),a(h,{id:"badges",modelValue:s(d),"onUpdate:modelValue":c[3]||(c[3]=i=>j(d)?d.value=i:null),type:"text"},null,8,["modelValue"])])]),a(M,{type:"submit",class:"w-full"},{default:n(()=>[m(" Create ")]),_:1})]),u("div",Ve,[u("div",$e,[a(N,$(s(t),{class:"w-full border-white transition-colors"}),null,16)])])],32),a(x,{open:s(v),"onUpdate:open":c[4]||(c[4]=i=>j(v)?v.value=i:null)},null,8,["open"])],64)}}});export{Me as default};
