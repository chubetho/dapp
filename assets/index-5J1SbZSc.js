import{c as le,d as v,o as l,a as m,w as s,r as $,u as e,P as re,b as ce,e as ie,f as t,Z as de,g as B,m as j,D as ue,X as pe,h as _e,i as ee,j as g,n as Q,k as fe,t as me,l as he,p as be,q as te,s as W,v as q,x as ge,y as N,z as b,A as w,F as O,B as A,C as n,E as ve,G as M,H as L,_ as ye,I as we,J as xe,K as X,L as se,M as oe,N as $e,O as Ce,Q as Se,R as Be,S as ke,T as Ve,U as je,V as Pe,W as Je,Y as De,$ as ze,a0 as Y,a1 as Ne,a2 as Oe,a3 as Ae,a4 as Fe}from"./index-oOlvovHs.js";import{_ as ae}from"./ScrollArea.vue_vue_type_script_setup_true_lang-OZzAJiiF.js";import{_ as Me,a as Te,b as Ue,c as Le,d as qe,e as Ee,f as Re,g as He}from"./JobCard.vue_vue_type_script_setup_true_lang-sKeU4D9-.js";import{_ as Ie}from"./Badge.vue_vue_type_script_setup_true_lang-y6D-Z957.js";import{C as Ke,_ as Ge}from"./BaseSearch.vue_vue_type_script_setup_true_lang-agdOXu72.js";import{C as Ze}from"./chevron-down-V1NCBs-T.js";import{E as We}from"./constants--OwaCeTz.js";import"./Input.vue_vue_type_script_setup_true_lang-DgkPgiwG.js";import"./Label.vue_vue_type_script_setup_true_lang-cjaacjvQ.js";/**
 * @license lucide-vue-next v0.297.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=le("HeartIcon",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Qe=v({__name:"Sheet",setup(r){return(o,a)=>(l(),m(e(re),null,{default:s(()=>[$(o.$slots,"default")]),_:3}))}}),Xe=v({__name:"SheetContent",props:{side:{},class:{},forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss","openAutoFocus","closeAutoFocus"],setup(r,{emit:o}){const a=r,p=ce(o),_=ee("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b border-border data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t border-border data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r border-border data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l border-border data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}});return(f,x)=>(l(),m(e(_e),null,{default:s(()=>[t(e(ie),{class:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),t(e(de),j({class:e(B)(e(_)({side:a.side}),a.class)},{...a,...e(p)}),{default:s(()=>[$(f.$slots,"default"),t(e(ue),{class:"absolute top-4 right-4 p-0.5 transition-colors rounded-md hover:bg-secondary"},{default:s(()=>[t(e(pe),{class:"w-4 h-4 text-muted-foreground"})]),_:1})]),_:3},16,["class"])]),_:3}))}}),et=v({__name:"SheetHeader",props:{class:{}},setup(r){const o=r;return(a,i)=>(l(),g("div",{class:Q(e(B)("flex flex-col space-y-2 text-center sm:text-left",o.class))},[$(a.$slots,"default")],2))}}),tt=v({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const o=r;return(a,i)=>(l(),m(e(fe),j({class:e(B)("text-muted-foreground",o.class)},o),{default:s(()=>[$(a.$slots,"default")]),_:3},16,["class"]))}}),st=v({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const o=r;return(a,i)=>(l(),m(e(me),j({class:e(B)("text-2xl font-semibold text-foreground",o.class)},o),{default:s(()=>[$(a.$slots,"default")]),_:3},16,["class"]))}}),ot={class:"pt-5 pb-2 flex gap-2 flex-wrap"},at={class:"space-y-1"},nt={key:0,class:"text-destructive"},lt={key:2},rt={class:"space-y-2 mt-10"},ct=n("h3",{class:"text-xl"}," info ",-1),it={class:"grid grid-cols-3 gap-1"},dt=n("div",null,"username",-1),ut={class:"col-span-2"},pt=n("div",null,"address",-1),_t={class:"col-span-2"},ft=n("div",null,"is reviewer",-1),mt={class:"col-span-2"},ht=n("div",null,"buyer reviewed",-1),bt={class:"col-span-2"},gt=n("div",null,"seller reviewed",-1),vt={class:"col-span-2"},yt={key:0,class:"space-y-5 mt-10"},wt={class:"text-xl"},xt={class:"flex flex-col gap-3"},$t={class:"space-y-2"},Ct={class:"space-y-2"},St={class:"-ml-2 flex gap-2"},Bt=v({__name:"JobSheet",props:he({job:{}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:["update:open"],async setup(r){let o,a;const i=r,p=be(r,"open"),_=te(),f=([o,a]=W(()=>_.getUserFactory()),o=await o,a(),o),x=([o,a]=W(()=>_.getJobFactory()),o=await o,a(),o),y=q(),P=q([]);ge(()=>i.job.owner,()=>{y.value=void 0,P.value=[],f.getUser(i.job.owner).then(d=>{y.value={owner:d[0],userName:d[1],isJudge:d[2],jobIds:d[3].map(Number),reviewsBuyerCount:Number(d[4]),reviewSellerCount:Number(d[5])}}),x.getAllJobsOfUser(i.job.owner).then(d=>{P.value=d.map(u=>({owner:u[0],id:Number(u[1]),title:u[2],description:u[3],price:Number(u[4]),inProcess:u[5],tags:u[6]})).filter(u=>u.id!==i.job.id)})},{immediate:!0});const C=N(""),J=N("");async function E(){if(!C.value){J.value="message is required";return}const u=await(await x.sendBuyRequest(i.job.id,C.value)).wait();(u==null?void 0:u.status)===1&&(C.value="",p.value=!1)}async function D(){await x.deleteJob(i.job.id)}return(d,u)=>{const k=st,c=tt,z=et,V=Ie,T=ye,R=Me,U=we,H=ae,I=Xe,K=Qe;return l(),m(K,{open:p.value,"onUpdate:open":u[1]||(u[1]=S=>p.value=S)},{default:s(()=>[t(I,{class:"sm:max-w-lg"},{default:s(()=>[t(z,null,{default:s(()=>[t(k,null,{default:s(()=>[w(b(d.job.title)+" #"+b(d.job.id),1)]),_:1}),t(c,null,{default:s(()=>[w(b(d.job.description),1)]),_:1})]),_:1}),n("div",ot,[(l(!0),g(O,null,A(d.job.tags,(S,F)=>(l(),m(V,{key:F,variant:"secondary"},{default:s(()=>[w(b(S),1)]),_:2},1024))),128))]),t(T,null,{default:s(()=>[w(b(d.job.price),1)]),_:1}),d.job.owner.toLowerCase()!==e(_).address.toLowerCase()?(l(),g("form",{key:0,class:"mt-3 space-y-3",onSubmit:ve(E,["prevent"])},[n("div",at,[t(R,{modelValue:e(C),"onUpdate:modelValue":u[0]||(u[0]=S=>M(C)?C.value=S:null),placeholder:"leave a message"},null,8,["modelValue"]),e(J)?(l(),g("p",nt,b(e(J)),1)):L("",!0)]),t(U,{class:"w-full",type:"submit"},{default:s(()=>[w(" send ")]),_:1})],32)):(l(),m(U,{key:1,class:"w-full mt-3",variant:"destructive",onClick:D},{default:s(()=>[w(" delete ")]),_:1})),e(y)?(l(),g("div",lt,[n("div",rt,[ct,n("div",it,[dt,n("div",ut,[t(V,{variant:"outline"},{default:s(()=>[w(b(e(y).userName),1)]),_:1})]),pt,n("div",_t,[t(V,{variant:"outline"},{default:s(()=>[w(b(e(y).owner),1)]),_:1})]),ft,n("div",mt,[t(V,{variant:"outline"},{default:s(()=>[w(b(e(y).isJudge?"yes":"no"),1)]),_:1})]),ht,n("div",bt,[t(V,{variant:"outline"},{default:s(()=>[w(b(e(y).reviewsBuyerCount),1)]),_:1})]),gt,n("div",vt,[t(V,{variant:"outline"},{default:s(()=>[w(b(e(y).reviewSellerCount),1)]),_:1})])])]),e(P).length?(l(),g("div",yt,[n("h3",wt," more from @"+b(e(y).userName),1),t(H,{class:"h-[400px]"},{default:s(()=>[n("ul",xt,[(l(!0),g(O,null,A(e(P),(S,F)=>(l(),g("li",{key:F,class:"px-3 py-2 rounded-md border"},[n("div",$t,[n("div",Ct,[n("p",null,b(S.title),1),n("ul",St,[(l(!0),g(O,null,A(S.tags,(G,Z)=>(l(),g("li",{key:Z},[t(V,{variant:"outline"},{default:s(()=>[w(b(G),1)]),_:2},1024)]))),128))])]),t(T,null,{default:s(()=>[w(b(S.price),1)]),_:2},1024)])]))),128))])]),_:1})])):L("",!0)])):L("",!0)]),_:1})]),_:1},8,["open"])}}}),kt=v({__name:"Skeleton",props:{class:{}},setup(r){const o=r;return(a,i)=>(l(),g("div",{class:Q(e(B)("animate-pulse rounded-md bg-secondary",o.class))},null,2))}}),Vt={},jt={class:"flex justify-between"},Pt={class:"flex gap-2 flex-wrap"};function Jt(r,o){const a=kt,i=Te,p=Ue,_=Le,f=qe,x=Ee,y=Re;return l(),m(y,{class:"group-hover:border-primary transition-colors"},{default:s(()=>[t(_,null,{default:s(()=>[t(i,null,{default:s(()=>[n("div",jt,[t(a,{class:"h-4 w-[200px]"})])]),_:1}),t(p,{class:"pt-2 flex gap-2"},{default:s(()=>[t(a,{class:"h-4 w-[80px]"}),t(a,{class:"h-4 w-[50px]"})]),_:1})]),_:1}),t(f,null,{default:s(()=>[n("div",Pt,[t(a,{class:"h-4 w-[60%]"}),t(a,{class:"h-4 w-[35%]"}),t(a,{class:"h-4 w-[45%]"}),t(a,{class:"h-4 w-[50%]"}),t(a,{class:"h-4 w-[70%]"})])]),_:1}),t(x,null,{default:s(()=>[t(a,{class:"h-4 w-[15%]"})]),_:1})]),_:1})}const Dt=xe(Vt,[["render",Jt]]),zt=v({__name:"Select",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},orientation:{},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(r,{emit:o}){const p=X(r,o);return(_,f)=>(l(),m(e($e),se(oe(e(p))),{default:s(()=>[$(_.$slots,"default")]),_:3},16))}}),Nt=v({__name:"SelectContent",props:{forceMount:{type:Boolean},position:{default:"popper"},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},onPlaced:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(r,{emit:o}){const a=r,p=X(a,o);return(_,f)=>(l(),m(e(Be),null,{default:s(()=>[t(e(Ce),j({...e(p),..._.$attrs},{class:e(B)("relative z-50 min-w-[10rem] overflow-hidden rounded-md bg-background border border-border text-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a.class)}),{default:s(()=>[t(e(Se),{class:Q(e(B)("p-1",_.position==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"))},{default:s(()=>[$(_.$slots,"default")]),_:3},8,["class"])]),_:3},16,["class"])]),_:3}))}}),Ot=v({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const o=r;return(a,i)=>(l(),m(e(ke),j({class:e(B)("p-1 w-full",o.class)},o),{default:s(()=>[$(a.$slots,"default")]),_:3},16,["class"]))}}),At={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},Ft=v({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(r){const o=r;return(a,i)=>(l(),m(e(Pe),j(o,{class:e(B)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o.class)}),{default:s(()=>[n("span",At,[t(e(Ve),null,{default:s(()=>[t(e(Ke),{class:"h-4 w-4"})]),_:1})]),t(e(je),null,{default:s(()=>[$(a.$slots,"default")]),_:3})]),_:3},16,["class"]))}}),Mt=v({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{default:""},invalid:{type:Boolean,default:!1}},setup(r){const o=r;return(a,i)=>(l(),m(e(De),j(o,{class:[e(B)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o.class),o.invalid?"!ring-destructive ring-2 placeholder:!text-destructive":""]}),{default:s(()=>[$(a.$slots,"default"),t(e(Je),{"as-child":""},{default:s(()=>[t(e(Ze),{class:"w-4 h-4 opacity-50"})]),_:1})]),_:3},16,["class"]))}}),Tt=v({__name:"SelectValue",props:{placeholder:{},asChild:{type:Boolean},as:{}},setup(r){const o=r;return(a,i)=>(l(),m(e(ze),se(oe(o)),{default:s(()=>[$(a.$slots,"default")]),_:3},16))}}),Ut=ee("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),Lt=v({__name:"Toggle",props:{variant:{default:"default"},size:{default:"default"},disabled:{type:Boolean,default:!1},defaultValue:{type:Boolean},pressed:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["update:pressed"],setup(r,{emit:o}){const a=r,i=o,p=Y(()=>{const{variant:f,size:x,disabled:y,...P}=a;return P}),_=X(p,i);return(f,x)=>(l(),m(e(Ne),j(e(_),{class:e(B)(e(Ut)({variant:f.variant,size:f.size,class:f.$attrs.class??""})),disabled:a.disabled}),{default:s(()=>[$(f.$slots,"default")]),_:3},16,["class","disabled"]))}}),qt={class:"py-10"},Et={class:"py-8 space-y-8"},Rt={class:"flex justify-between items-center"},Ht={class:"flex items-center gap-3"},It=n("h1",{class:"text-4xl"}," jobs ",-1),Kt={class:"flex items-center whitespace-nowrap gap-2"},Gt=n("span",{class:"text-muted-foreground"}," sort by: ",-1),Zt={class:"min-w-[200px]"},Wt={class:"grid grid-cols-3 gap-6"},rs=v({__name:"index",async setup(r){let o,a;const i=te(),p=N(""),_=Oe(p,500),f=N(!1),x=N("lth"),y=[{label:"price: low to high",value:"lth"},{label:"price: hight to low",value:"htl"}],P=([o,a]=W(()=>i.getJobFactory()),o=await o,a(),o),C=q([]),J=Y(()=>f.value?C.value.filter(k=>k.owner.toLowerCase()===i.address.toLowerCase()):C.value),E=Y(()=>(_.value?J.value.filter(c=>JSON.stringify(c).toLowerCase().includes(p.value.toLowerCase())):J.value).sort((c,z)=>x.value==="lth"?c.price-z.price:z.price-c.price));Ae(()=>{P.getAllJobs().then(k=>{C.value=k.filter(c=>c[0]!==We).map(c=>({owner:c[0],id:Number(c[1]),title:c[2],description:c[3],price:Number(c[4]),inProcess:c[5],tags:c[6]}))})});const D=N(!1),d=q();function u(k){d.value=k,D.value=!0}return(k,c)=>{const z=Ge,V=Lt,T=Tt,R=Mt,U=Ft,H=Ot,I=Nt,K=zt,S=He,F=Dt,G=ae,Z=Bt;return l(),g("div",null,[n("div",qt,[t(z,{modelValue:e(p),"onUpdate:modelValue":c[0]||(c[0]=h=>M(p)?p.value=h:null),placeholder:"search for job title or keyword"},null,8,["modelValue"])]),n("div",Et,[n("div",Rt,[n("div",Ht,[It,t(V,{pressed:e(f),"onUpdate:pressed":c[1]||(c[1]=h=>M(f)?f.value=h:null),"aria-label":"toggle my job only"},{default:s(()=>[t(e(Ye),{size:20})]),_:1},8,["pressed"])]),n("div",Kt,[Gt,n("div",Zt,[t(K,{modelValue:e(x),"onUpdate:modelValue":c[2]||(c[2]=h=>M(x)?x.value=h:null)},{default:s(()=>[t(R,null,{default:s(()=>[t(T)]),_:1}),t(I,null,{default:s(()=>[t(H,null,{default:s(()=>[(l(),g(O,null,A(y,h=>t(U,{key:h.value,value:h.value},{default:s(()=>[w(b(h.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),t(G,{class:"h-[800px]"},{default:s(()=>[n("div",Wt,[e(C).length?(l(!0),g(O,{key:0},A(e(E),(h,ne)=>(l(),m(S,j({key:ne},h,{onClick:Yt=>u(h)}),null,16,["onClick"]))),128)):(l(),g(O,{key:1},A(5,h=>t(F,{key:h})),64))])]),_:1})]),e(d)?(l(),m(Fe,{key:0},[t(Z,{open:e(D),"onUpdate:open":c[3]||(c[3]=h=>M(D)?D.value=h:null),job:e(d)},null,8,["open","job"])],1024)):L("",!0)])}}});export{rs as default};
